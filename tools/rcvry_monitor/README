This README file contains information about the rcvry_monitor tool.

Introduction
============
WiFi Recovery Monitor application (or tool) restarts the WiFi services
by calling a platform-specific recovery script following an UNRECOVERABLE_ERROR event from WAVE driver (mtlk).

It serves as an additional third layer of WiFi recovery in case that previous layers could not resolve the issue.
The first layer is "Fast Recovery" - the WiFi driver performs a reboot of the WiFi FW in case of MAC exception.
If reached the max allowed number, the second layer is "Full Recovery" - the WiFi driver performs a reboot of the WiFi FW, including offline calibration and smart channel selection.
If reached the max allowed number, the third layer is "Complete Recovery", implemented in this module - the rcvry_monitor restarts the WiFi services (mainly driver + FW) after receiving the UNRECOVERABLE_ERROR event from the driver.

This application is a daemon that should be run once per platform on device boot-up after driver insmod.

Usage
=====
rcvry_monitor

Available OPTIONS: None

Flow
====
Application does the following:

1. Listens to DWPALD / Driver's 'Unrecoverable Error' event in a while loop.

2. When received, calls the recovery script.

   * Use script parameter '-dwpald' if needed (determined at build time). This will cause the DWPAL Daemon to be stopped and started at recovery.

3. Reports errors/milestones using syslog.

Notes
=====
Supported platforms:
1. RDKB (e.g. Puma7/CGR)
2. UGW (e.g. AXP/LGM) - Not supported currently. To be added later.

The contents of the recovery script (e.g. wave_complete_recovery_rdkb.sh) can be modified according to specific platform requirements.
